# MobileNet-YOLO Configuration with YOLO Dataset Format

# Model Settings
model:
  backbone: "mobilenetv3_large_100"  # timm model name
  pretrained: true
  num_classes: 80  # Will be overridden by dataset yaml
  input_size: [640, 640]

  # Detection head configuration
  fpn_channels: 256
  num_anchors: 3

# Anchor settings (similar to YOLO)
anchors:
  # Anchors for different feature map scales
  # Format: [width, height] in pixels at input resolution
  - [[10, 13], [16, 30], [33, 23]]      # Small objects (stride 8)
  - [[30, 61], [62, 45], [59, 119]]     # Medium objects (stride 16)
  - [[116, 90], [156, 198], [373, 326]] # Large objects (stride 32)

# Training settings
train:
  epochs: 300
  batch_size: 16
  num_workers: 4

  # Optimizer
  optimizer:
    type: "AdamW"
    lr: 0.001
    weight_decay: 0.0005

  # Scheduler
  scheduler:
    type: "CosineAnnealingLR"
    T_max: 300
    eta_min: 0.00001

  # Loss weights
  loss_weights:
    box: 0.05
    obj: 1.0
    cls: 0.5

  # Data augmentation
  augmentation:
    mosaic: 0.5
    mixup: 0.0
    hsv_h: 0.015
    hsv_s: 0.7
    hsv_v: 0.4
    degrees: 0.0
    translate: 0.1
    scale: 0.5
    shear: 0.0
    perspective: 0.0
    flipud: 0.0
    fliplr: 0.5

# Validation settings
val:
  batch_size: 32
  conf_thresh: 0.001
  iou_thresh: 0.6
  nms_thresh: 0.45

# Dataset configuration using YOLO format
data:
  # Path to YOLO dataset yaml file
  # This yaml file should contain:
  #   - path: dataset root directory
  #   - train: relative path to training images
  #   - val: relative path to validation images
  #   - test: (optional) relative path to test images
  #   - nc: number of classes
  #   - names: list of class names
  yaml: "data/dataset.yaml"

# Checkpoint and logging
checkpoint:
  save_dir: "checkpoints"
  save_interval: 10

logging:
  log_dir: "logs"
  print_interval: 50
